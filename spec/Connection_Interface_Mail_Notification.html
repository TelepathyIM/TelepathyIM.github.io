<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd" "">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
 <head>
  <title>Conn.I.MailNotification &mdash; Telepathy D-Bus Interface Specification</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="style.css" type="text/css"/>
  <link rel="shortcut icon" type="image/png" media="all" href="favicon.png" />
  <script src="jquery.min.js"></script>
  <script src="magic.js"></script>
 </head>
 <body>
  <div class="header">
  <h1>Interface <abbr title='org.freedesktop.Telepathy.Connection.Interface.MailNotification'>Connection.Interface.MailNotification</abbr></h1>
   <a href="index.html">Interface Index</a>
   (<a href="interfaces.html">Compact</a>)
   | <a href="#summary">Summary</a>
    | <a href="#client-interests">Client Interests</a> 
    | <a href="#description">Description</a> 
    | <a href="#methods">Methods</a> 
    | <a href="#signals">Signals</a> 
    | <a href="#properties">Properties</a> 
   
   
    | <a href="#types">Types</a> 
  </div>
  <div class="main">

    
    <div class="summary">
     <a name="summary"></a>
     
     <h3>Client Interests</h3>
     <table class="summary">
      
      <td><a href="Connection_Interface_Mail_Notification.html#Client-Interest:org.freedesktop.Telepathy.Connection.Interface.MailNotification">org.freedesktop.Telepathy.Connection.Interface.MailNotification</a></td>
      
     </table>
     
     
     <h3>Methods</h3>
     <table class="summary">
      
       
        <tr>
       
       <td><a href="Connection_Interface_Mail_Notification.html#Method:RequestInboxURL">RequestInboxURL</a></td>
       <td>()</td>
       <td>&#8594;</td>
       <td>(sua(ss)): URL</td>
       <td>
        
       </td>
      </tr>
      
       
        <tr>
       
       <td><a href="Connection_Interface_Mail_Notification.html#Method:RequestMailURL">RequestMailURL</a></td>
       <td>(s: ID, v: URL_Data)</td>
       <td>&#8594;</td>
       <td>(sua(ss)): URL</td>
       <td>
        
       </td>
      </tr>
      
     </table>
     

     
     <h3>Signals</h3>
     <table class="summary">
      
       
        <tr>
       
       <td><a href="Connection_Interface_Mail_Notification.html#Signal:MailsReceived">MailsReceived</a></td>
       <td>(aa{sv}: Mails)</td>
       <td>
        
       </td>
      </tr>
      
       
        <tr>
       
       <td><a href="Connection_Interface_Mail_Notification.html#Signal:UnreadMailsChanged">UnreadMailsChanged</a></td>
       <td>(u: Count, aa{sv}: Mails_Added, as: Mails_Removed)</td>
       <td>
        
       </td>
      </tr>
      
     </table>
    

     
     <h3>Properties</h3>
     <table class="summary">
      
       
        <tr>
       
       <td><a href="Connection_Interface_Mail_Notification.html#Property:MailNotificationFlags">MailNotificationFlags</a></td>
       <td>
        u
        
          (<a href="Connection_Interface_Mail_Notification.html#Flags:Mail_Notification_Flags" title="Flags Mail_Notification_Flags">
              Mail_Notification_Flags</a>)
        
       </td>
       <td>Read only</td>
       <td></td>
       <td>
        
       </td>
      </tr>
      
       
        <tr>
       
       <td><a href="Connection_Interface_Mail_Notification.html#Property:UnreadMailCount">UnreadMailCount</a></td>
       <td>
        u
        
       </td>
       <td>Read only</td>
       <td></td>
       <td>
        
       </td>
      </tr>
      
       
        <tr>
       
       <td><a href="Connection_Interface_Mail_Notification.html#Property:UnreadMails">UnreadMails</a></td>
       <td>
        aa{sv}
        
          (<a href="Connection_Interface_Mail_Notification.html#Mapping:Mail" title="Array of Mapping Mail">
              Mail_List</a>)
        
       </td>
       <td>Read only</td>
       <td></td>
       <td>
        
       </td>
      </tr>
      
       
        <tr>
       
       <td><a href="Connection_Interface_Mail_Notification.html#Property:MailAddress">MailAddress</a></td>
       <td>
        s
        
       </td>
       <td>Read only</td>
       <td></td>
       <td>
        
       </td>
      </tr>
      
    </table>
    

     

     

     
     <h3>Types</h3>
     <table class="summary">
      
       
        <tr>
       
       <td><a href="Connection_Interface_Mail_Notification.html#Enum:HTTP_Method">HTTP_Method</a></td>
       <td>Enum</td>
       <td>u</td>
       <td>
        
       </td>
      </tr>
      
       
        <tr>
       
       <td><a href="Connection_Interface_Mail_Notification.html#Flags:Mail_Notification_Flags">Mail_Notification_Flags</a></td>
       <td>Flags</td>
       <td>u</td>
       <td>
        
       </td>
      </tr>
      
       
        <tr>
       
       <td><a href="Connection_Interface_Mail_Notification.html#Mapping:Mail">Mail</a></td>
       <td>Mapping</td>
       <td>a{sv}</td>
       <td>
        
       </td>
      </tr>
      
       
        <tr>
       
       <td><a href="Connection_Interface_Mail_Notification.html#Struct:HTTP_Post_Data">HTTP_Post_Data</a></td>
       <td>Struct</td>
       <td>(ss)</td>
       <td>
        
       </td>
      </tr>
      
       
        <tr>
       
       <td><a href="Connection_Interface_Mail_Notification.html#Struct:Mail_Address">Mail_Address</a></td>
       <td>Struct</td>
       <td>(ss)</td>
       <td>
        
       </td>
      </tr>
      
       
        <tr>
       
       <td><a href="Connection_Interface_Mail_Notification.html#Struct:Mail_URL">Mail_URL</a></td>
       <td>Struct</td>
       <td>(sua(ss))</td>
       <td>
        
       </td>
      </tr>
      
     </table>
    
   </div>
   

   
   <div class="annotation added"><span class="version">Added in 0.21.3. </span>(as stable API)</div>
   
   

   
   <div class="requires">
    Objects implementing this interface must also implement:
    <ul>
    
    
     <li><a href="Connection.html" title="Interface org.freedesktop.Telepathy.Connection">org.freedesktop.Telepathy.Connection</a></li>
    
    </ul>
   </div>
   

   
    <a name="description"></a>
    <h3>Description</h3>
    <div class="docstring" xmlns="http://www.w3.org/1999/xhtml">
      <p>An interface to support receiving notifications about a e-mail
        account associated with this connection.</p>

      <p>In protocols where this is possible, this interface also allows the
        connection manager to provide the necessary information for clients
        to open a web-based mail client without having to re-authenticate.</p>

      <p>To use this interface, a client MUST first subscribe by passing the
        name of this interface to the <a href="Connection.html#Method:AddClientInterest" namespace="org.freedesktop.Telepathy" title="Method org.freedesktop.Telepathy.Connection.AddClientInterest">Connection.AddClientInterest</a> method. The subscription
        mechanic aims at reducing network traffic and memory footprint in the
        situation where nobody is currently interesting in provided
        information. When done with this interface, clients SHOULD call
        <a href="Connection.html#Method:RemoveClientInterest" namespace="org.freedesktop.Telepathy" title="Method org.freedesktop.Telepathy.Connection.RemoveClientInterest">Connection.RemoveClientInterest</a> to allow the CM to
        release resources.</p>

      <p>Protocols have various different levels of Mail Notification support.
        To describe the level of support, the interface provides a property
        called <a href="Connection_Interface_Mail_Notification.html#Property:MailNotificationFlags" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.MailNotificationFlags">MailNotificationFlags</a>.
        Not all combinations are valid; protocols can be divided into four
        categories as follows.</p>

      <p>Connections to the most capable protocols, such as Google's XMPP Mail
        Notification extension, have the Supports_Unread_Mails flag (this
        implies that they must also have Supports_Unread_Mail_Count, but not
        Emits_Mails_Received). On these connections, clients
        requiring change notification MUST monitor the
        <a href="Connection_Interface_Mail_Notification.html#Signal:UnreadMailsChanged" title="Signal org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMailsChanged">UnreadMailsChanged</a> signal, and
        either recover the initial state from the
        <a href="Connection_Interface_Mail_Notification.html#Property:UnreadMails" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMails">UnreadMails</a> property (if they require
        details other than the number of mails) or the
        <a href="Connection_Interface_Mail_Notification.html#Property:UnreadMailCount" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMailCount">UnreadMailCount</a> property (if they
        are only interested in the number of unread mails). The
        <a href="Connection_Interface_Mail_Notification.html#Signal:MailsReceived" title="Signal org.freedesktop.Telepathy.Connection.Interface.MailNotification.MailsReceived">MailsReceived</a> signal is never emitted
        on these connections, so clients that will display a short-term
        notification for each new mail MUST do so in response to emission of
        the <a href="Connection_Interface_Mail_Notification.html#Signal:UnreadMailsChanged" title="Signal org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMailsChanged">UnreadMailsChanged</a> signal.</p>

      <p>The most common situation, seen in protocols like MSN and Yahoo, is
        that the number of unread mails is provided and kept up-to-date,
        and a separate notification is emitted with some details of each new
        mail. This is a combination of the following two features, and clients
        SHOULD implement one or both as appropriate for their requirements.</p>

      <p>On protocols that have the Emits_Mails_Received flag (which implies
        that they do not have Supports_Unread_Mails), the CM does not keep
        track of any mails; it simply emits a notification whenever new mail
        arrives. Those events may be used for short term display (like a
        notification popup) to inform the user. No protocol is known to support
        only this feature, but it is useful for integration with libraries that
        that do not implement tracking of the number of mails. Clients
        requiring these notifications MUST monitor the
        <a href="Connection_Interface_Mail_Notification.html#Signal:MailsReceived" title="Signal org.freedesktop.Telepathy.Connection.Interface.MailNotification.MailsReceived">MailsReceived</a> signal on any connections
        with this flag.</p>

      <p>On protocols that have the Supports_Unread_Mail_Count flag but not
        the Supports_Unread_Mails flag, clients cannot display complete
        details of unread email, but can display an up-to-date count of the
        <em>number</em> of unread mails. To do this, they must monitor the
        <a href="Connection_Interface_Mail_Notification.html#Signal:UnreadMailsChanged" title="Signal org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMailsChanged">UnreadMailsChanged</a> signal, and
        retrieve the initial state from the
        <a href="Connection_Interface_Mail_Notification.html#Property:UnreadMailCount" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMailCount">UnreadMailCount</a> property.</p>

      <p>
        Orthogonal features described by the
        <a href="Connection_Interface_Mail_Notification.html#Property:MailNotificationFlags" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.MailNotificationFlags">MailNotificationFlags</a> property include the
        RequestSomethingURL methods, which are used to obtain URLs allowing
        clients to open a webmail client. Connections SHOULD support as many
        of these methods as possible.</p>
    </div>
   

   
   <div class="outset client-interests client-interest">
    <a name="client-interests"></a>
    <h1>Client Interests</h1>
    <div>
     Set using the
     <a href="Connection.html#org.freedesktop.Telepathy.Connection.AddClientInterest">AddClientInterest</a> and
     <a href="Connection.html#org.freedesktop.Telepathy.Connection.RemoveClientInterest">RemoveClientInterest</a> methods.
    </div>
    
    <div class="inset client-interest">
     <a name="Client-Interest:org.freedesktop.Telepathy.Connection.Interface.MailNotification"></a>
     <span class="permalink">(<a href="Connection_Interface_Mail_Notification.html#Client-Interest:org.freedesktop.Telepathy.Connection.Interface.MailNotification">Permalink</a>)</span>
     <h2>org.freedesktop.Telepathy.Connection.Interface.MailNotification</h2>

     <div class="docstring">
        A client MUST notify interest in this feature before it will be
        enabled.
      </div>
    </div>
    
   </div>
   

   
   <div class="outset methods method">
    <a name="methods"></a>
    <h1>Methods</h1>
    
    <div class="inset method">
     <a name="Method:RequestInboxURL"></a>
     <span class="permalink">(<a href="Connection_Interface_Mail_Notification.html#Method:RequestInboxURL">Permalink</a>)</span>
     <h2>RequestInboxURL () &#8594; (sua(ss)): URL</h2>

     
     
     

     

     

     
     <div class="indent">
      <h3>Returns</h3>
      <ul>
      
       <li>
        URL &mdash; (sua(ss))
        
          (<a href="Connection_Interface_Mail_Notification.html#Struct:Mail_URL" title="Struct Mail_URL">Mail_URL</a>)
        
       </li>
       
       
       
       <div class="docstring">
          A struture containing a URL and optional additional data to open a
          webmail client, without re-authentication if possible.
        </div>
      
      </ul>
     </div>
     

     <div class="docstring">
        This method creates and returns a URL and an optional POST data that
        allow opening the Inbox folder of a webmail account. This URL MAY
        contain tokens with a short lifetime, so clients SHOULD request a new
        URL for each visit to the webmail interface. This method is implemented
        only if the <tt>Supports_Request_Inbox_URL</tt> flag is set in
        <a href="Connection_Interface_Mail_Notification.html#Property:MailNotificationFlags" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.MailNotificationFlags">MailNotificationFlags</a>.

        <div class="rationale"><h5>Rationale:</h5><div>
          We are not using properties here because the tokens are unsuitable
          for sharing between clients, and network round-trips may be required
          to obtain the information that leads to authentication free webmail
          access.
        </div></div>
      </div>

     
     <hr/>
     <div class="indent">
      <h3>Possible Errors</h3>
      <ul>
      
       <li><a href="errors.html#Error:Disconnected" title="Error org.freedesktop.Telepathy.Error.Disconnected">Disconnected</a></li>
       
       
       
       <div class="docstring">
      The connection is not currently connected and cannot be used.
      This error may also be raised when operations are performed on a
      Connection for which
      <a href="Connection.html#Signal:StatusChanged" namespace="org.freedesktop.Telepathy.Connection" title="Signal org.freedesktop.Telepathy.Connection.StatusChanged">StatusChanged</a>
      has signalled status Disconnected for reason None.

      <div class="rationale"><h5>Rationale:</h5><div>
        The second usage corresponds to None in the
        <a href="Connection.html#Enum:Connection_Status_Reason">Connection_Status_Reason</a> enum; if a better reason
        is available, the corresponding error should be used instead.
      </div></div>
    </div>
      
       <li><a href="errors.html#Error:Network Error" title="Error org.freedesktop.Telepathy.Error.NetworkError">Network Error</a></li>
       
       
       
       <div class="docstring">
    Raised when there is an error reading from or writing to the network.
    </div>
      
       <li><a href="errors.html#Error:Not Implemented" title="Error org.freedesktop.Telepathy.Error.NotImplemented">Not Implemented</a></li>
       
       
       
       <div class="docstring">
    Raised when the requested method, channel, etc is not available on this connection.
    </div>
      
      </ul>
     </div>
     
    </div>
    
    <div class="inset method">
     <a name="Method:RequestMailURL"></a>
     <span class="permalink">(<a href="Connection_Interface_Mail_Notification.html#Method:RequestMailURL">Permalink</a>)</span>
     <h2>RequestMailURL (s: ID, v: URL_Data) &#8594; (sua(ss)): URL</h2>

     
     
     

     

     
     <div class="indent">
      <h3>Parameters</h3>
      <ul>
      
       <li>
        ID &mdash; s
        
       </li>
       
       
       
       <div class="docstring">
          The mail's <tt>id</tt> as found in the <a href="Connection_Interface_Mail_Notification.html#Mapping:Mail">Mail</a>
          structure, or the empty string if no <tt>id</tt> key was provided.
        </div>
      
       <li>
        URL_Data &mdash; v
        
       </li>
       
       
       
       <div class="docstring">
          Whatever <tt>url-data</tt> was found in the <a href="Connection_Interface_Mail_Notification.html#Mapping:Mail">Mail</a>
          structure, or the boolean value False (D-Bus type 'b') if no
          <tt>url-data</tt> was provided in the Mail.
        </div>
      
      </ul>
     </div>
     

     
     <div class="indent">
      <h3>Returns</h3>
      <ul>
      
       <li>
        URL &mdash; (sua(ss))
        
          (<a href="Connection_Interface_Mail_Notification.html#Struct:Mail_URL" title="Struct Mail_URL">Mail_URL</a>)
        
       </li>
       
       
       
       <div class="docstring">
          A struture that contains a URL and optional additional data to open a
          webmail client, without re-authentication if possible.
        </div>
      
      </ul>
     </div>
     

     <div class="docstring">
        This method creates and returns a URL and optional POST data that
        allow opening a specific mail in a webmail interface. This
        method is implemented only if <tt>Supports_Request_Mail_URL</tt> flag
        is set in <a href="Connection_Interface_Mail_Notification.html#Property:MailNotificationFlags" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.MailNotificationFlags">MailNotificationFlags</a>.
        <div class="rationale"><h5>Rationale:</h5><div>
          See <a href="Connection_Interface_Mail_Notification.html#Method:RequestInboxURL" title="Method org.freedesktop.Telepathy.Connection.Interface.MailNotification.RequestInboxURL">RequestInboxURL</a> for design
          rationale.
        </div></div>
      </div>

     
     <hr/>
     <div class="indent">
      <h3>Possible Errors</h3>
      <ul>
      
       <li><a href="errors.html#Error:Disconnected" title="Error org.freedesktop.Telepathy.Error.Disconnected">Disconnected</a></li>
       
       
       
       <div class="docstring">
      The connection is not currently connected and cannot be used.
      This error may also be raised when operations are performed on a
      Connection for which
      <a href="Connection.html#Signal:StatusChanged" namespace="org.freedesktop.Telepathy.Connection" title="Signal org.freedesktop.Telepathy.Connection.StatusChanged">StatusChanged</a>
      has signalled status Disconnected for reason None.

      <div class="rationale"><h5>Rationale:</h5><div>
        The second usage corresponds to None in the
        <a href="Connection.html#Enum:Connection_Status_Reason">Connection_Status_Reason</a> enum; if a better reason
        is available, the corresponding error should be used instead.
      </div></div>
    </div>
      
       <li><a href="errors.html#Error:Network Error" title="Error org.freedesktop.Telepathy.Error.NetworkError">Network Error</a></li>
       
       
       
       <div class="docstring">
    Raised when there is an error reading from or writing to the network.
    </div>
      
       <li><a href="errors.html#Error:Not Implemented" title="Error org.freedesktop.Telepathy.Error.NotImplemented">Not Implemented</a></li>
       
       
       
       <div class="docstring">
    Raised when the requested method, channel, etc is not available on this connection.
    </div>
      
       <li><a href="errors.html#Error:Invalid Argument" title="Error org.freedesktop.Telepathy.Error.InvalidArgument">Invalid Argument</a></li>
       
       
       
       <div class="docstring">
    Raised when one of the provided arguments is invalid.
    </div>
      
      </ul>
     </div>
     
    </div>
    
   </div>
   

   
   <div class="outset signals signal">
    <a name="signals"></a>
    <h1>Signals</h1>
    
    <div class="inset signal">
     <a name="Signal:MailsReceived"></a>
     <span class="permalink">(<a href="Connection_Interface_Mail_Notification.html#Signal:MailsReceived">Permalink</a>)</span>
     <h2>MailsReceived (aa{sv}: Mails)</h2>

     
     
     

     
     <div class="indent">
      <h3>Parameters</h3>
      <ul>
      
       <li>
       Mails &mdash; aa{sv}
       
        (<a href="Connection_Interface_Mail_Notification.html#Mapping:Mail" title="Array of Mapping Mail">Mail_List</a>)
       
       </li>
       
       
       
       <div class="docstring" xmlns="http://www.w3.org/1999/xhtml">
          <p>An array of <a href="Connection_Interface_Mail_Notification.html#Mapping:Mail">Mail</a>s. Those e-mail MUST NOT have
            the &quot;id&quot; key.</p>

          <div class="rationale"><h5>Rationale:</h5><div>
            <p>On connections that emit this signal, it's impossible to tell
              when a mail has been removed, and hence when &quot;id&quot; has become
              invalid.</p>
          </div></div>
        </div>
      
      </ul>
     </div>
     

     <div class="docstring">
        Emitted when new e-mails messages arrive to the inbox associated with
        this connection. This signal is used for protocols that are not able
        to maintain the <a href="Connection_Interface_Mail_Notification.html#Property:UnreadMails" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMails">UnreadMails</a> list, but
        do provide real-time notification about newly arrived e-mails. It MUST
        NOT be emitted unless <tt>Emits_Mails_Received</tt> is set in
        <a href="Connection_Interface_Mail_Notification.html#Property:MailNotificationFlags" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.MailNotificationFlags">MailNotificationFlags</a>.
      </div>
    </div>
    
    <div class="inset signal">
     <a name="Signal:UnreadMailsChanged"></a>
     <span class="permalink">(<a href="Connection_Interface_Mail_Notification.html#Signal:UnreadMailsChanged">Permalink</a>)</span>
     <h2>UnreadMailsChanged (u: Count, aa{sv}: Mails_Added, as: Mails_Removed)</h2>

     
     
     

     
     <div class="indent">
      <h3>Parameters</h3>
      <ul>
      
       <li>
       Count &mdash; u
       
       </li>
       
       
       
       <div class="docstring">
          Number of unread messages in the inbox (the new value of
          <a href="Connection_Interface_Mail_Notification.html#Property:UnreadMailCount" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMailCount">UnreadMailCount</a>).
        </div>
      
       <li>
       Mails_Added &mdash; aa{sv}
       
        (<a href="Connection_Interface_Mail_Notification.html#Mapping:Mail" title="Array of Mapping Mail">Mail_List</a>)
       
       </li>
       
       
       
       <div class="docstring" xmlns="http://www.w3.org/1999/xhtml">
          <p>A list of <a href="Connection_Interface_Mail_Notification.html#Mapping:Mail">Mail</a> that are being added or updated
            in <a href="Connection_Interface_Mail_Notification.html#Property:UnreadMails" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMails">UnreadMails</a>.</p>

          <div class="rationale"><h5>Rationale:</h5><div>
            <p>Mails may be updated when the URL information (URL and POST data)
              have changed, or senders were added or removed from an e-mail
              thread.</p>
          </div></div>

          <p>If the <tt>Supports_Unread_Mails</tt> flag is not set, this list
            MUST be empty, even if Count has increased.</p>
        </div>
      
       <li>
       Mails_Removed &mdash; as
       
       </li>
       
       
       
       <div class="docstring">
          A list of e-mail IDs that are being removed from
          <a href="Connection_Interface_Mail_Notification.html#Property:UnreadMails" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMails">UnreadMails</a>.
          If the <tt>Supports_Unread_Mails</tt> flag is not set, this list
          MUST be empty, even if Count has decreased.
        </div>
      
      </ul>
     </div>
     

     <div class="docstring" xmlns="http://www.w3.org/1999/xhtml">
        <p>Emitted when <a href="Connection_Interface_Mail_Notification.html#Property:UnreadMails" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMails">UnreadMails</a> or
          <a href="Connection_Interface_Mail_Notification.html#Property:UnreadMailCount" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMailCount">UnreadMailCount</a> have changed. It MUST
          NOT be emited if <tt>Supports_Unread_Mail_Count</tt> flag is not set
          in <a href="Connection_Interface_Mail_Notification.html#Property:MailNotificationFlags" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.MailNotificationFlags">MailNotificationFlags</a>.</p>

        <p><tt>Mails_Added</tt> and
          <tt>Mails_Removed</tt> MUST be empty if the
          <tt>Supports_Unread_Mails</tt> flag is not set.</p>
      </div>
    </div>
    
   </div>
   

   
   <div class="outset properties property">
    <a name="properties"></a>
    <h1>Properties</h1>
    <div>
     Accessed using the <a
       href="http://dbus.freedesktop.org/doc/dbus-specification.html#standard-interfaces-properties">org.freedesktop.DBus.Properties</a>
     interface.
    </div>
    
    <div class="inset property">
     <a name="Property:MailNotificationFlags"></a>
     <span class="permalink">(<a href="Connection_Interface_Mail_Notification.html#Property:MailNotificationFlags">Permalink</a>)</span>
     <h2>
      MailNotificationFlags &mdash; u
      
        (<a href="Connection_Interface_Mail_Notification.html#Flags:Mail_Notification_Flags" title="Flags Mail_Notification_Flags">Mail_Notification_Flags</a>)
      
     </h2>
      <div class="access">Read only</div>

     

     

     
     
     

     
     
     

      

     <div class="docstring">
        Integer representing the bitwise-OR of supported features for e-mails
        notification on this server. This property MUST NOT change after the
        Connection becomes CONNECTED.

        <div class="rationale"><h5>Rationale:</h5><div>
          This property indicates the behavior and availability
          of the other properties and signals within this interface. A
          connection manager that cannot at least set one of the flags
          in the <a href="Connection_Interface_Mail_Notification.html#Flags:Mail_Notification_Flags">Mail_Notification_Flags</a>
          SHOULD NOT provide this interface.
        </div></div>
      </div>
    </div>
    
    <div class="inset property">
     <a name="Property:UnreadMailCount"></a>
     <span class="permalink">(<a href="Connection_Interface_Mail_Notification.html#Property:UnreadMailCount">Permalink</a>)</span>
     <h2>
      UnreadMailCount &mdash; u
      
     </h2>
      <div class="access">Read only</div>

     

     

     
     
     

     
     
     

      

     <div class="docstring" xmlns="http://www.w3.org/1999/xhtml">
        <p>The number of unread messages in the Inbox. Change notification is
          via <a href="Connection_Interface_Mail_Notification.html#Signal:UnreadMailsChanged" title="Signal org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMailsChanged">UnreadMailsChanged</a>.</p>

        <p>This property is only useful if <tt>Supports_Unread_Mail_Count</tt>
          is set in the <a href="Connection_Interface_Mail_Notification.html#Property:MailNotificationFlags" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.MailNotificationFlags">MailNotificationFlags</a>;
          otherwise, it MUST be zero.</p>

        <p>If <tt>Thread_Based</tt> appears in the
          <a href="Connection_Interface_Mail_Notification.html#Property:MailNotificationFlags" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.MailNotificationFlags">MailNotificationFlags</a>, this property
          counts the number of threads, not the number of mails.</p>

        <p>Note that this count MAY be bigger than the number of items in
          <a href="Connection_Interface_Mail_Notification.html#Property:UnreadMails" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMails">UnreadMails</a>. See
          <a href="Connection_Interface_Mail_Notification.html#Property:UnreadMails" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMails">UnreadMails</a> for more details.</p>
      </div>
    </div>
    
    <div class="inset property">
     <a name="Property:UnreadMails"></a>
     <span class="permalink">(<a href="Connection_Interface_Mail_Notification.html#Property:UnreadMails">Permalink</a>)</span>
     <h2>
      UnreadMails &mdash; aa{sv}
      
        (<a href="Connection_Interface_Mail_Notification.html#Mapping:Mail" title="Array of Mapping Mail">Mail_List</a>)
      
     </h2>
      <div class="access">Read only</div>

     

     

     
     
     

     
     
     

      

     <div class="docstring">
        <p>An array of unread <a href="Connection_Interface_Mail_Notification.html#Mapping:Mail">Mail</a>s. Change notification is
          via <a href="Connection_Interface_Mail_Notification.html#Signal:UnreadMailsChanged" title="Signal org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMailsChanged">UnreadMailsChanged</a>. This property
          is only useful if <tt>Supports_Unread_Mails</tt> is set in
          <a href="Connection_Interface_Mail_Notification.html#Property:MailNotificationFlags" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.MailNotificationFlags">MailNotificationFlags</a>; otherwise, it
          MUST be an empty list.</p>
        <p>The array size MAY be shorter than
          <a href="Connection_Interface_Mail_Notification.html#Property:UnreadMailCount" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMailCount">UnreadMailCount</a>.</p>
        <div class="rationale"><h5>Rationale:</h5><div>
          <p>Some servers may limits the amount of detailed e-mails sent. This
            can significantly reduce the network traffic for large inbox. For
            this reason, it is normal that
            <a href="Connection_Interface_Mail_Notification.html#Property:UnreadMailCount" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMailCount">UnreadMailCount</a> be bigger or equal
            to the size of this array.</p>
          </div></div>
      </div>
    </div>
    
    <div class="inset property">
     <a name="Property:MailAddress"></a>
     <span class="permalink">(<a href="Connection_Interface_Mail_Notification.html#Property:MailAddress">Permalink</a>)</span>
     <h2>
      MailAddress &mdash; s
      
     </h2>
      <div class="access">Read only</div>

     

     

     
     
     

     
     
     

      

     <div class="docstring">
        A string representing the e-mail address of the account. The CMs MUST
        provide this information.
        <div class="rationale"><h5>Rationale:</h5><div>
          In close integration of MailNotification with other e-mail services,
          the e-mail address can be used has a unique identifier for the
          account. Possible integration could be between Telepathy and
          Evolution where the e-mail address is the common information in
          both interfaces.
        </div></div>
      </div>
    </div>
    
   </div>
   

   

   

   
   <div class="outset types type">
    <a name="types"></a>
    <h1>Types</h1>
    
     <div class="inset type">
      <a name="Enum:HTTP_Method"></a>
      <span class="permalink">Enum (<a href="Connection_Interface_Mail_Notification.html#Enum:HTTP_Method">Permalink</a>)</span>
      <h2>
       HTTP_Method &mdash; u
      </h2>

      
      
      
      <div class="docstring">
        The HTTP Method with which to request a URL.
      </div>
      <ul>
<li>Get (0)</li>
<div class="docstring">
          Use the GET method when opening the URL.
        </div><li>Post (1)</li>
<div class="docstring">
          Use the POST method when opening the URL. Refer to
          <a href="Connection_Interface_Mail_Notification.html#Struct:HTTP_Post_Data">HTTP_Post_Data</a> for more details.
        </div></ul>

     </div>
    
     <div class="inset type">
      <a name="Flags:Mail_Notification_Flags"></a>
      <span class="permalink">Flags (<a href="Connection_Interface_Mail_Notification.html#Flags:Mail_Notification_Flags">Permalink</a>)</span>
      <h2>
       Mail_Notification_Flags &mdash; u
      </h2>

      
      
      
      <div class="docstring">
        <p>Flags representing capabilities provided by a connection manager.
          Those values can be used as bitfield. Some flags depend on, or
          conflict with, each other.</p>

        <p>Connections SHOULD implement as many of these features as the
          underlying protocol allows, preferring to implement
          Supports_Unread_Mails instead of Emits_Mails_Received if both are
          possible.</p>
      </div>
      <ul>
<li>Supports_Unread_Mail_Count (1)</li>
<div class="docstring">
          This Connection provides the number of unread e-mails (or e-mail
          threads) in the main folder of your e-mail account, as the
          <a href="Connection_Interface_Mail_Notification.html#Property:UnreadMailCount" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMailCount">UnreadMailCount</a> property. The
          connection manager will update this value by emitting the
          <a href="Connection_Interface_Mail_Notification.html#Signal:UnreadMailsChanged" title="Signal org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMailsChanged">UnreadMailsChanged</a> signal.
        </div><li>Supports_Unread_Mails (2)</li>
<div class="docstring">
          This Connection provides a detailed list of unread e-mails, as the
          <a href="Connection_Interface_Mail_Notification.html#Property:UnreadMails" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMails">UnreadMails</a> property. If this flag
          is set, <tt>Supports_Unread_Mail_Count</tt> MUST be set, and
          <tt>Emits_Mails_Received</tt> MUST NOT be set.
          The Connection will update the list by emitting the
          <a href="Connection_Interface_Mail_Notification.html#Signal:UnreadMailsChanged" title="Signal org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMailsChanged">UnreadMailsChanged</a> signals.
        </div><li>Emits_Mails_Received (4)</li>
<div class="docstring">
          This Connection emits the <a href="Connection_Interface_Mail_Notification.html#Signal:MailsReceived" title="Signal org.freedesktop.Telepathy.Connection.Interface.MailNotification.MailsReceived">MailsReceived</a>
          signal, which provides details about newly arrived e-mails but does
          not maintain their read/unread status afterwards. This flag MUST NOT
          be combined with <tt>Supports_Unread_Mails</tt>.
        </div><li>Supports_Request_Inbox_URL (8)</li>
<div class="docstring">
          This Connection can provide a URL (with optional POST data) to
          open the the inbox of the e-mail account in a web-based client, via
          the <a href="Connection_Interface_Mail_Notification.html#Method:RequestInboxURL" title="Method org.freedesktop.Telepathy.Connection.Interface.MailNotification.RequestInboxURL">RequestInboxURL</a> method.
        </div><li>Supports_Request_Mail_URL (16)</li>
<div class="docstring" xmlns="http://www.w3.org/1999/xhtml">
          <p>This Connection can provide a URL (with optional POST data) to open
            a specific mail in a web-based client, via the
            <a href="Connection_Interface_Mail_Notification.html#Method:RequestMailURL" title="Method org.freedesktop.Telepathy.Connection.Interface.MailNotification.RequestMailURL">RequestMailURL</a> method. This feature
            is not useful unless either Emits_Mails_Received or
            Supports_Unread_Mails is set.</p>

          <p>If this flag is not set, clients SHOULD fall back to using
            <a href="Connection_Interface_Mail_Notification.html#Method:RequestInboxURL" title="Method org.freedesktop.Telepathy.Connection.Interface.MailNotification.RequestInboxURL">RequestInboxURL</a> if available.</p>
        </div><li>Thread_Based (32)</li>
<div class="docstring" xmlns="http://www.w3.org/1999/xhtml">
          <p>Each <a href="Connection_Interface_Mail_Notification.html#Mapping:Mail">Mail</a> represents a thread of e-mails, which
            MAY have more than one sender.</p>

          <div class="rationale"><h5>Rationale:</h5><div>
            <p>Google Talk notifies users about new mail in terms of unread
              threads, rather than unread e-mails.</p>
          </div></div>
        </div></ul>

     </div>
    
     <div class="inset type">
      <a name="Mapping:Mail"></a>
      <span class="permalink">Mapping (<a href="Connection_Interface_Mail_Notification.html#Mapping:Mail">Permalink</a>)</span>
      <h2>
       Mail &mdash; a{sv}
      </h2>

      
      
      
      <div class="docstring">
        An extensible map representing a mail, or (on protocols where
        <tt>Thread_Based</tt> appears in
        <a href="Connection_Interface_Mail_Notification.html#Property:MailNotificationFlags" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.MailNotificationFlags">MailNotificationFlags</a>) a thread of
        mails. All keys are optional where not otherwise stated; however, at
        least one of &quot;senders&quot; and &quot;subject&quot; must be included.
      </div>
      <ul>
<li>Key &mdash; s</li>
<div class="docstring">
          <p>A key providing information about the mail or thread. Well-known
            keys are as follows:</p>

        <dl>
          <dt>id — s</dt>
          <dd>
            <p>A unique ID for this e-mail. CMs with
              <tt>Supports_Unread_Mails</tt> set in
              <a href="Connection_Interface_Mail_Notification.html#Property:MailNotificationFlags" title="Property org.freedesktop.Telepathy.Connection.Interface.MailNotification.MailNotificationFlags">MailNotificationFlags</a> MUST provide
              this key in each <a href="Connection_Interface_Mail_Notification.html#Mapping:Mail">Mail</a>.</p>

            <p>If provided, the ID SHOULD be unique to a Mail at least until
              that mail is removed with the
              <a href="Connection_Interface_Mail_Notification.html#Signal:UnreadMailsChanged" title="Signal org.freedesktop.Telepathy.Connection.Interface.MailNotification.UnreadMailsChanged">UnreadMailsChanged</a> signal
              (in protocols with <tt>Supports_Unread_Emails</tt>), or
              unique for the duration of a session (otherwise).</p>

            <div class="rationale"><h5>Rationale:</h5><div>
              <p>In protocols with Supports_Unread_Mails, this key is used to
                indicate which mail was removed. In protocols without that
                feature, it's impossible to tell when a mail has been removed
                (and hence how long the identifier will remain valid for use
                with <a href="Connection_Interface_Mail_Notification.html#Method:RequestMailURL" title="Method org.freedesktop.Telepathy.Connection.Interface.MailNotification.RequestMailURL">RequestMailURL</a>).</p>
            </div></div>
          </dd>

          <dt>url-data — any type</dt>
          <dd>An opaque identifier (typically a string or list of strings)
            provided to the Connection when calling
            <a href="Connection_Interface_Mail_Notification.html#Method:RequestMailURL" title="Method org.freedesktop.Telepathy.Connection.Interface.MailNotification.RequestMailURL">RequestMailURL</a>,
            containing information used by the Connection to build the URL.
          </dd>

          <dt>senders — a(ss) (<a href="Connection_Interface_Mail_Notification.html#Struct:Mail_Address">Mail_Address</a>)</dt>
          <dd>
            An array of sender display name and e-mail address pairs. Note that
            only e-mails represented as a thread can have multiple senders.
          </dd>

          <dt>to-addresses — a(ss) (<a href="Connection_Interface_Mail_Notification.html#Struct:Mail_Address">Mail_Address</a>)</dt>
          <dd>
            An array of display name and e-mail address pairs representing
            the recipients.
          </dd>

          <dt>cc-addresses — a(ss) (<a href="Connection_Interface_Mail_Notification.html#Struct:Mail_Address">Mail_Address</a>)</dt>
          <dd>
            An array of display name and e-mail address pairs representing
            the carbon-copy recipients.
          </dd>

          <dt>sent-timestamp — x (<a href="generic-types.html#Simple-Type:Unix_Timestamp64">Unix_Timestamp64</a>)</dt>
          <dd>A UNIX timestamp indicating when the message was sent, or for
            a thread, when the most recent message was sent.
          </dd>

          <dt>received-timestamp — x (<a href="generic-types.html#Simple-Type:Unix_Timestamp64">Unix_Timestamp64</a>)</dt>
          <dd>A UNIX timestamp indicating when the message was received, or for
            a thread, when the most recent message was received.
          </dd>

          <dt>has-attachments — b</dt>
          <dd>If true, this mail has attachments.</dd>

          <dt>subject — s</dt>
          <dd>
            The subject of the message. This MUST be encoded in UTF-8.
          </dd>

          <dt>content-type — s</dt>
          <dd>
            <p>The MIME type of the message content. Two types are currently
              supported: &quot;text/plain&quot; for plain text, and &quot;text/html&quot; for a
              HTML document. If omitted, &quot;text/plain&quot; MUST be assumed.
              Regardless of MIME type, the content MUST be valid UTF-8 (which
              may require that the Connection transcodes it from a legacy
              encoding).</p>

            <div class="rationale"><h5>Rationale:</h5><div>
              <p>All strings on D-Bus must be UTF-8.</p>
            </div></div>
          </dd>

          <dt>truncated — b</dt>
          <dd>
            If true, the content is only a partial message; if false or
            omitted, the content is the entire message.
          </dd>

          <dt>content — s</dt>
          <dd>
            The body of the message, possibly truncated, encoded as appropriate
            for &quot;content-type&quot;.
          </dd>

          <dt>folder — s</dt>
          <dd>
            The name of the folder containing this e-mails.
            If omitted, the inbox SHOULD be assumed.
          </dd>
        </dl>
        </div><li>Value &mdash; v</li>
<div class="docstring">The value, of whatever type is appropriate for the
          key.</div></ul>

     </div>
    
     <div class="inset type">
      <a name="Struct:HTTP_Post_Data"></a>
      <span class="permalink">Struct (<a href="Connection_Interface_Mail_Notification.html#Struct:HTTP_Post_Data">Permalink</a>)</span>
      <h2>
       HTTP_Post_Data &mdash; (ss)
      </h2>

      
      
      
      <div class="docstring" xmlns="http://www.w3.org/1999/xhtml">
        <p>A pair (key, value) representing POST data compatible with the
        application/x-www-form-urlencoded MIME type. The strings MUST be
        valid UTF-8 strings, and the characters used in the key MUST obey
        the requirements of the
        <a href="http://www.w3.org/TR/html401/types.html#type-cdata">
          HTML CDATA type</a>. The value MUST NOT be
        encoded with HTML entities.</p>

        <p>For example, if the POST data should contain a key &quot;less-than&quot; with value
        &quot;&lt;&quot;, and a key &quot;percent&quot; with value &quot;%&quot;, this should be represented as
        two HTTP_Post_Data structures, (&quot;less-than&quot;, &quot;&lt;&quot;) and (&quot;percent&quot;, &quot;%&quot;),
        resulting in a POST request whose request body is &quot;less-than=&amp;lt;&amp;percent=%25&quot;.
        If a client passes this to a browser by writing it into an HTML form, it
        could do so by representing it as:</p>

        <pre>
        &lt;input type=&quot;hidden&quot; name=&quot;less-than&quot;&gt;&amp;lt;&lt;/input&gt;
        &lt;input type=&quot;hidden&quot; name=&quot;percent&quot;&gt;%&lt;/input&gt;
        </pre>

        <div class="rationale"><h5>Rationale:</h5><div>
          <p>This data can be used to generate a HTML file that will
            automatically load the URL with appropriate POST data, in which case
            the client MUST convert any characters that are special within HTML
            into HTML entities. Alternatively, it can be used in an API that will
            instruct the browser how to load the URL (like the Netscape Plug-in
            API), in which case the client MUST escape
            <a href="http://www.ietf.org/rfc/rfc1738.txt">characters that are
              reserved in URLs</a>, if appropriate for that API.</p>

          <p>An array of pairs is used instead of a map from keys to values,
            because it's valid to repeat keys in both HTML and
            x-www-form-urlencoded data.</p>
        </div></div>
      </div>
      <ul>
<li>Key &mdash; s</li>
<div class="docstring">The key, corresponding to a HTML control
          name</div><li>Value &mdash; s</li>
<div class="docstring">The value</div></ul>

     </div>
    
     <div class="inset type">
      <a name="Struct:Mail_Address"></a>
      <span class="permalink">Struct (<a href="Connection_Interface_Mail_Notification.html#Struct:Mail_Address">Permalink</a>)</span>
      <h2>
       Mail_Address &mdash; (ss)
      </h2>

      
      
      
      <div class="docstring" xmlns="http://www.w3.org/1999/xhtml">
        <p>A pair (name, address) representing an e-mail address,
        such as (&quot;Nicolas Dufresne&quot;, &quot;nicolas.dufresne@collabora.co.uk&quot;). At
        least one of name and address MUST be provided. A missing element will
        be represented by the empty string.</p>
        <div class="rationale"><h5>Rationale:</h5><div>
	  <p>The CM should provide as much information as possible, but not all
            protocols provide both the displayed name and the address. (If a
            protocol doesn't provide either, it should omit the appropriate
            field from the <a href="Connection_Interface_Mail_Notification.html#Mapping:Mail">Mail</a> entirely.)</p>
        </div></div>
      </div>
      <ul>
<li>Name &mdash; s</li>
<div class="docstring">The displayed name corresponding to the e-mail
          address</div><li>Address &mdash; s</li>
<div class="docstring">The actual e-mail address</div></ul>

     </div>
    
     <div class="inset type">
      <a name="Struct:Mail_URL"></a>
      <span class="permalink">Struct (<a href="Connection_Interface_Mail_Notification.html#Struct:Mail_URL">Permalink</a>)</span>
      <h2>
       Mail_URL &mdash; (sua(ss))
      </h2>

      
      
      
      <div class="docstring" xmlns="http://www.w3.org/1999/xhtml">
        <p>A structure containing the required information to open a web-based
          e-mail UI, without needing re-authentication (if possible).</p>

        <p>Because the URL and POST data frequently contain short-lived
          credential tokens, a new URL should be requested (by calling one of
          the methods that returns a Mail_URL) for each visit to the web-based
          UI, and the URL should be visited soon after it is returned.</p>
      </div>
      <ul>
<li>URL &mdash; s</li>
<div class="docstring">
          The URL to which to send a request.
        </div><li>Method &mdash; u (<a href="Connection_Interface_Mail_Notification.html#Enum:HTTP_Method" title="Enum HTTP_Method">HTTP_Method</a>)</li>
<div class="docstring">
          The HTTP method of the request.
        </div><li>Post_Data &mdash; a(ss) (<a href="Connection_Interface_Mail_Notification.html#Struct:HTTP_Post_Data" title="Array of Struct HTTP_Post_Data">HTTP_Post_Data_List</a>)</li>
<div class="docstring">
          An array of name-value pairs containing the POST data to use when
          opening the URL. This MUST be an empty array if the Method is not
          POST.
        </div></ul>

     </div>
    
   </div>
   

   </div>

 </body>
</html>